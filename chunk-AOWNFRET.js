import{A as n,e as p,h as o,k as u,n as g,na as s,r as h,za as f}from"./chunk-J337Y4CE.js";import{a as i,b as c}from"./chunk-FDERIQAA.js";var y={features:[],selectedFeature:null,loading:!1,error:null},F=class l{http=h(f);apiUrl="api/features";_state=n(y);features=s(()=>this._state().features);selectedFeature=s(()=>this._state().selectedFeature);loading=s(()=>this._state().loading);error=s(()=>this._state().error);isEmpty=s(()=>!this._state().loading&&this._state().features.length===0);searchTerm=n("");categoryFilter=n(null);filteredFeatures=s(()=>{let e=this.searchTerm().toLowerCase(),t=this.categoryFilter(),r=this.features();return t&&(r=r.filter(a=>a.category===t)),e&&(r=r.filter(a=>a.name.toLowerCase().includes(e)||a.description?.toLowerCase().includes(e))),r});featuresByCategory=s(()=>this.features().reduce((t,r)=>(t[r.category]||(t[r.category]=[]),t[r.category].push(r),t),{}));loadFeatures(){this.updateState({loading:!0,error:null}),this.http.get(this.apiUrl).pipe(u(e=>this.updateState({features:e,loading:!1})),o(e=>(this.updateState({error:"Failed to load features",loading:!1}),p([])))).subscribe()}loadFeature(e){this.updateState({loading:!0,error:null}),this.http.get(`${this.apiUrl}/${e}`).pipe(u(t=>this.updateState({selectedFeature:t,loading:!1})),o(t=>(this.updateState({error:"Failed to load feature",loading:!1}),p(null)))).subscribe()}getFeaturesByIds(e){return this.features().filter(t=>e.includes(t.id))}createFeature(e){return this.updateState({loading:!0,error:null}),this.http.post(this.apiUrl,e).pipe(u(t=>{this.updateState({features:[...this._state().features,t],loading:!1})}),o(t=>{throw this.updateState({error:"Failed to create feature",loading:!1}),t}))}updateFeature(e,t){this.updateState({loading:!0,error:null});let r=c(i({},t),{id:e});return this.http.put(`${this.apiUrl}/${e}`,r).pipe(u(()=>{let a=this._state().features.map(d=>d.id===e?i(i({},d),r):d);this.updateState({features:a,selectedFeature:this._state().selectedFeature?.id===e?i(i({},this._state().selectedFeature),r):this._state().selectedFeature,loading:!1})}),o(a=>{throw this.updateState({error:"Failed to update feature",loading:!1}),a}))}deleteFeature(e){return this.updateState({loading:!0,error:null}),this.http.delete(`${this.apiUrl}/${e}`).pipe(u(()=>{let t=this._state().features.filter(r=>r.id!==e);this.updateState({features:t,selectedFeature:this._state().selectedFeature?.id===e?null:this._state().selectedFeature,loading:!1})}),o(t=>{throw this.updateState({error:"Failed to delete feature",loading:!1}),t}))}selectFeature(e){this.updateState({selectedFeature:e})}setSearchTerm(e){this.searchTerm.set(e)}setCategoryFilter(e){this.categoryFilter.set(e)}clearError(){this.updateState({error:null})}updateState(e){this._state.update(t=>i(i({},t),e))}static \u0275fac=function(t){return new(t||l)};static \u0275prov=g({token:l,factory:l.\u0275fac,providedIn:"root"})};var E={meeting_room:"Meeting Room",office:"Office",bathroom:"Bathroom",common_area:"Common Area",storage:"Storage",kitchen:"Kitchen"};var U={connectivity:"Connectivity",equipment:"Equipment",accessibility:"Accessibility",comfort:"Comfort"};export{F as a,E as b,U as c};
