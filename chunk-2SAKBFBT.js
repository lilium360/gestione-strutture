import{a as k}from"./chunk-C2AJT47N.js";import{a as z,b as I,c as F,d as V,s as A,t as M}from"./chunk-XVVISF6R.js";import{D as i,Fa as b,G as D,K as S,N as s,P as g,R as T,S as L,T as r,U as a,V as c,W as v,X as d,Y as p,da as u,ea as m,ia as h,ib as E,jb as w,r as y,ra as x,u as f,v as C}from"./chunk-J337Y4CE.js";import"./chunk-FDERIQAA.js";var N=e=>[e,"edit"],$=e=>[e],P=(e,n)=>n.id;function j(e,n){e&1&&c(0,"app-loading-state",6)}function G(e,n){if(e&1){let t=v();r(0,"app-error-state",10),d("retry",function(){f(t);let l=p();return C(l.loadData())}),a()}if(e&2){let t=p();s("message",t.facade.error()||void 0)}}function H(e,n){e&1&&(r(0,"div",8)(1,"app-empty-state",11)(2,"a",2),u(3,"Add Your First Structure"),a()()())}function R(e,n){if(e&1){let t=v();r(0,"div",13)(1,"div",15)(2,"div",16),c(3,"lucide-icon",17),a(),r(4,"div",18)(5,"a",19),c(6,"lucide-icon",20),a(),r(7,"button",21),d("click",function(){let l=f(t).$implicit,_=p(2);return C(_.confirmDelete(l))}),c(8,"lucide-icon",22),a()()(),r(9,"a",23)(10,"h3",24),u(11),a(),r(12,"div",25),c(13,"lucide-icon",26),r(14,"span"),u(15),a()(),r(16,"p",27),u(17),a()()()}if(e&2){let t=n.$implicit;i(3),s("size",24),i(2),s("routerLink",h(9,N,t.id)),i(),s("size",16),i(2),s("size",16),i(),s("routerLink",h(11,$,t.id)),i(2),m(t.name),i(2),s("size",14),i(2),m(t.city),i(2),m(t.address)}}function Y(e,n){e&1&&c(0,"app-empty-state",14)}function q(e,n){if(e&1&&(r(0,"div",12),T(1,R,18,13,"div",13,P),a(),S(3,Y,1,0,"app-empty-state",14)),e&2){let t=p();i(),L(t.facade.filteredStructures()),i(2),g(t.facade.filteredStructures().length===0&&t.searchTerm?3:-1)}}var O=class e{facade=y(k);searchTerm="";showDeleteDialog=!1;structureToDelete=null;ngOnInit(){this.loadData()}loadData(){this.facade.loadStructures()}onSearch(n){this.searchTerm=n,this.facade.setSearchTerm(n)}confirmDelete(n){this.structureToDelete=n,this.showDeleteDialog=!0}onDeleteConfirm(){this.structureToDelete&&this.facade.deleteStructure(this.structureToDelete.id).subscribe(),this.onDeleteCancel()}onDeleteCancel(){this.showDeleteDialog=!1,this.structureToDelete=null}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=D({type:e,selectors:[["app-structures-list"]],decls:12,vars:5,consts:[[1,"structures-page"],["title","Structures","subtitle","Manage your buildings and locations"],["routerLink","new",1,"btn","btn-primary"],["name","plus",3,"size"],[1,"toolbar"],["placeholder","Search structures...",3,"valueChange","value"],["message","Loading structures..."],[3,"message"],[1,"empty-card"],["title","Delete Structure","confirmText","Delete","variant","destructive",3,"confirm","cancel","isOpen","message"],[3,"retry","message"],["title","No structures yet","description","Get started by adding your first structure"],[1,"list-grid"],[1,"list-card"],["icon","search","title","No results","description","Try a different search term"],[1,"card-header"],[1,"card-icon","icon-primary"],["name","building-2",3,"size"],[1,"card-actions"],["title","Edit",1,"icon-btn",3,"routerLink"],["name","pencil",3,"size"],["title","Delete",1,"icon-btn","icon-btn-danger",3,"click"],["name","trash-2",3,"size"],[1,"card-content",3,"routerLink"],[1,"card-title"],[1,"card-meta"],["name","map-pin",3,"size"],[1,"card-address"]],template:function(t,o){t&1&&(r(0,"div",0)(1,"app-page-header",1)(2,"a",2),c(3,"lucide-icon",3),u(4," Add Structure "),a()(),r(5,"div",4)(6,"app-search-input",5),d("valueChange",function(_){return o.onSearch(_)}),a()(),S(7,j,1,0,"app-loading-state",6)(8,G,1,1,"app-error-state",7)(9,H,4,0,"div",8)(10,q,4,1),r(11,"app-confirm-dialog",9),d("confirm",function(){return o.onDeleteConfirm()})("cancel",function(){return o.onDeleteCancel()}),a()()),t&2&&(i(3),s("size",16),i(3),s("value",o.searchTerm),i(),g(o.facade.loading()?7:o.facade.error()?8:o.facade.isEmpty()?9:10),i(4),s("isOpen",o.showDeleteDialog)("message","Are you sure you want to delete "+((o.structureToDelete==null?null:o.structureToDelete.name)||"")+"? This will also remove all associated spaces."))},dependencies:[x,b,w,E,M,A,z,I,F,V],encapsulation:2,changeDetection:0})};export{O as StructuresListComponent};
