import{a as U,c as W}from"./chunk-AOWNFRET.js";import{e as N,f as F,g as M,h as A,i as L,k as q,l as P,m as G,n as O,o as B,q as $,r as R,t as j}from"./chunk-XVVISF6R.js";import{D as l,Ea as T,G as E,K as d,N as s,O as C,P as u,Q as x,R as b,S as h,T as o,U as t,V as _,W as y,X as c,Y as p,da as a,ea as S,fa as D,ib as I,jb as V,qa as w,r as g,ra as k,u as f,v}from"./chunk-J337Y4CE.js";import"./chunk-FDERIQAA.js";var H=(i,r)=>r.value;function Y(i,r){i&1&&(o(0,"span",7),a(1,"Name is required"),t())}function J(i,r){if(i&1&&(o(0,"option",12),a(1),t()),i&2){let e=r.$implicit,n=p();s("value",e),l(),S(n.getCategoryLabel(e))}}function K(i,r){i&1&&(o(0,"span",7),a(1,"Category is required"),t())}function Q(i,r){if(i&1&&(o(0,"option",12),a(1),t()),i&2){let e=r.$implicit;s("value",e.value),l(),S(e.label)}}function X(i,r){i&1&&(o(0,"span",7),a(1,"Icon is required"),t())}function Z(i,r){if(i&1){let e=y();o(0,"button",23),c("click",function(){f(e);let m=p();return v(m.confirmDelete())}),_(1,"lucide-icon",24),a(2," Delete "),t()}i&2&&(l(),s("size",16))}function ee(i,r){i&1&&(_(0,"span",25),a(1," Saving... "))}function te(i,r){if(i&1&&a(0),i&2){let e=p();D(" ",e.isEditMode?"Update Feature":"Create Feature"," ")}}function ie(i,r){if(i&1){let e=y();o(0,"div",26),c("click",function(){f(e);let m=p();return v(m.onDeleteCancel())}),o(1,"div",27),c("click",function(m){return f(e),v(m.stopPropagation())}),o(2,"h3",28),a(3,"Delete Feature"),t(),o(4,"p",29),a(5,"Are you sure you want to delete this feature? This action cannot be undone."),t(),o(6,"div",30)(7,"button",20),c("click",function(){f(e);let m=p();return v(m.onDeleteCancel())}),a(8,"Cancel"),t(),o(9,"button",23),c("click",function(){f(e);let m=p();return v(m.onDeleteConfirm())}),a(10,"Delete"),t()()()()}}var z=class i{id;fb=g($);router=g(T);facade=g(U);location=g(w);form;isSubmitting=!1;showDeleteDialog=!1;categories=["connectivity","equipment","accessibility","comfort"];icons=[{value:"wifi",label:"Wi-Fi"},{value:"presentation",label:"Projector"},{value:"accessibility",label:"Accessibility"},{value:"thermometer",label:"Climate Control"},{value:"video",label:"Video Conference"},{value:"square",label:"Whiteboard"},{value:"cable",label:"Ethernet"},{value:"sun",label:"Natural Light"}];get isEditMode(){return!!this.id}goBack(){this.location.back()}confirmDelete(){this.showDeleteDialog=!0}onDeleteCancel(){this.showDeleteDialog=!1}onDeleteConfirm(){this.id&&this.facade.deleteFeature(this.id).subscribe(()=>{this.router.navigate(["/features"])}),this.showDeleteDialog=!1}ngOnInit(){this.initForm(),this.isEditMode&&this.loadFeature()}initForm(){this.form=this.fb.group({name:["",[F.required,F.minLength(2)]],category:["",F.required],icon:["",F.required],description:[""]})}loadFeature(){this.facade.loadFeature(this.id);let r=setInterval(()=>{let e=this.facade.selectedFeature();e&&e.id===this.id&&(this.form.patchValue({name:e.name,category:e.category,icon:e.icon,description:e.description||""}),clearInterval(r))},100)}getCategoryLabel(r){return W[r]}isFieldInvalid(r){let e=this.form.get(r);return!!(e&&e.invalid&&e.touched)}onSubmit(){if(this.form.invalid){this.form.markAllAsTouched();return}this.isSubmitting=!0;let r=this.form.value;(this.isEditMode?this.facade.updateFeature(this.id,r):this.facade.createFeature(r)).subscribe({next:()=>{this.router.navigate(["/features"])},error:()=>{this.isSubmitting=!1}})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=E({type:i,selectors:[["app-feature-form"]],inputs:{id:"id"},decls:41,vars:16,consts:[[1,"page-container"],[3,"title","subtitle"],[1,"form-layout-narrow",3,"ngSubmit","formGroup"],[1,"form-card"],[1,"form-group"],["for","name",1,"form-label"],["type","text","id","name","formControlName","name","placeholder","e.g., Wi-Fi, Projector",1,"form-input"],[1,"form-error"],[1,"form-row"],["for","category",1,"form-label"],["id","category","formControlName","category",1,"form-input","form-select"],["value",""],[3,"value"],["for","icon",1,"form-label"],["id","icon","formControlName","icon",1,"form-input","form-select"],["for","description",1,"form-label"],["id","description","formControlName","description","rows","3","placeholder","Optional description",1,"form-input","form-textarea"],[1,"form-actions"],["type","button",1,"btn","btn-danger"],[1,"form-actions-right"],["type","button",1,"btn","btn-outline",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"dialog-overlay"],["type","button",1,"btn","btn-danger",3,"click"],["name","trash-2",3,"size"],[1,"spinner"],[1,"dialog-overlay",3,"click"],[1,"dialog-content",3,"click"],[1,"dialog-title"],[1,"dialog-message"],[1,"dialog-actions"]],template:function(e,n){e&1&&(o(0,"div",0),_(1,"app-page-header",1),o(2,"form",2),c("ngSubmit",function(){return n.onSubmit()}),o(3,"div",3)(4,"div",4)(5,"label",5),a(6,"Name *"),t(),_(7,"input",6),d(8,Y,2,0,"span",7),t(),o(9,"div",8)(10,"div",4)(11,"label",9),a(12,"Category *"),t(),o(13,"select",10)(14,"option",11),a(15,"Select a category"),t(),b(16,J,2,2,"option",12,x),t(),d(18,K,2,0,"span",7),t(),o(19,"div",4)(20,"label",13),a(21,"Icon *"),t(),o(22,"select",14)(23,"option",11),a(24,"Select an icon"),t(),b(25,Q,2,2,"option",12,H),t(),d(27,X,2,0,"span",7),t()(),o(28,"div",4)(29,"label",15),a(30,"Description"),t(),_(31,"textarea",16),t()(),o(32,"div",17),d(33,Z,3,1,"button",18),o(34,"div",19)(35,"button",20),c("click",function(){return n.goBack()}),a(36,"Cancel"),t(),o(37,"button",21),d(38,ee,2,0)(39,te,1,1),t()()()(),d(40,ie,11,0,"div",22),t()),e&2&&(l(),s("title",n.isEditMode?"Edit Feature":"New Feature")("subtitle",n.isEditMode?"Update feature details":"Add a new amenity or service"),l(),s("formGroup",n.form),l(5),C("error",n.isFieldInvalid("name")),l(),u(n.isFieldInvalid("name")?8:-1),l(5),C("error",n.isFieldInvalid("category")),l(3),h(n.categories),l(2),u(n.isFieldInvalid("category")?18:-1),l(4),C("error",n.isFieldInvalid("icon")),l(3),h(n.icons),l(2),u(n.isFieldInvalid("icon")?27:-1),l(6),u(n.isEditMode?33:-1),l(4),s("disabled",n.form.invalid||n.isSubmitting),l(),u(n.isSubmitting?38:39),l(2),u(n.showDeleteDialog?40:-1))},dependencies:[k,R,L,O,B,N,G,M,A,q,P,V,I,j],encapsulation:2,changeDetection:0})};export{z as FeatureFormComponent};
